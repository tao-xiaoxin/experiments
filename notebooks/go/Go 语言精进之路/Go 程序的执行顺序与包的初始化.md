# Go 程序的执行顺序与包的初始化

Go 程序由一系列 Go 包组成，代码的执行也是在各个包之间跳转。和其他语言一样，Go 也拥有自己的用户层入口：main 函数。

## 一、程序的入口

### 1.1 main.main 函数：Go 应用的入口函数

+ main 包中的 main 函数，也就是 `main.main`，它是所有 Go 可执行程序的用户层执行逻辑的入口函数，也就是Go 程序的函数。
+ Go 语言要求：可执行程序的 main 包必须定义`main` 函数，否则 Go 编译器会报错。
+ 不过对于 main 包的 main 函数来说，还需要明确一点，就是它虽然是**用户层逻辑的入口函数，但它却不一定是用户层第一个被执行的函数**。

### 1.2 main 函数原型

```go
package main
func main() {
    // 用户层执行逻辑
    ... ...
}
```

`main` 函数的函数原型非常简单，没有参数也没有返回值。

### 1.3 非main 包的main 函数

其他包也可以拥有自己的名为 main 的函数或方法。但按照 Go 的可见性规则（小写字母开头的标识符为非导出标识符），**非 main 包中自定义的 main 函数仅限于包内使用**，就像下面代码这样，：

```go
package pkg1
  
import "fmt"

func Main() {
    main()
}

func main() {
    fmt.Println("main func for pkg1")
}  
```

这里 main 函数就主要是用来在包 pkg1 内部使用的，它是没法在包外使用的。

## 二、包

Go语言中支持模块化的开发理念，在Go语言中使用`包（package）`来支持代码模块化和代码复用。一个包是由一个或多个Go源码文件（.go结尾的文件）组成，是一种高级的代码复用方案，Go语言为我们提供了很多内置包，如`fmt`、`os`、`io`等。

### 2.1 定义

我们可以根据自己的需要创建自定义包。一个包可以简单理解为一个存放`.go`文件的文件夹。该文件夹下面的所有`.go`文件都要在非注释的第一行添加如下声明，声明该文件归属的包。

```go
package packagename
```

其中：

- package：声明包的关键字
- packagename：包名，可以不与文件夹的名称一致，不能包含 `-` 符号，最好与其实现的功能相对应。

### 2.2 标识符可见性



## 三、包的初始化



